<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQLite B-Tree Visualization</title>
    <link rel="stylesheet" href="src/web/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>SQLite B-Tree Visualization</h1>
            <p class="subtitle">Interactive WebAssembly-powered database internals explorer</p>
        </header>

        <div class="main-layout">
            <!-- Left Panel: SQL Editor and Controls -->
            <div class="left-panel">
                <section class="sql-editor-section">
                    <h2>SQL Editor</h2>
                    <textarea id="sql-input" placeholder="Enter SQL commands here...
Example:
CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT, age INTEGER);
INSERT INTO users VALUES (1, 'Alice', 30);
INSERT INTO users VALUES (2, 'Bob', 25);
SELECT * FROM users;">CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT, age INTEGER);
INSERT INTO users VALUES (1, 'Alice', 30);
INSERT INTO users VALUES (2, 'Bob', 25);
SELECT * FROM users;</textarea>
                    <div class="button-group">
                        <button id="execute-btn" class="btn btn-primary">Execute SQL</button>
                        <button id="step-btn" class="btn btn-secondary">Step Through</button>
                        <button id="clear-btn" class="btn btn-secondary">Clear</button>
                    </div>
                </section>

                <section class="output-section">
                    <h2>Query Results</h2>
                    <div id="output" class="output-box">
                        <p class="placeholder">Results will appear here...</p>
                    </div>
                </section>

                <section class="events-section">
                    <h2>Event Log</h2>
                    <div class="controls">
                        <label>
                            <input type="checkbox" id="auto-scroll" checked>
                            Auto-scroll
                        </label>
                        <button id="clear-events-btn" class="btn btn-small">Clear Log</button>
                    </div>
                    <div id="event-log" class="event-log"></div>
                </section>
            </div>

            <!-- Right Panel: Visualization -->
            <div class="right-panel">
                <section class="visualization-section">
                    <h2>B-Tree Visualization</h2>
                    <div class="viz-controls">
                        <label>
                            View:
                            <select id="view-mode">
                                <option value="btree">B-Tree Structure</option>
                                <option value="parse">SQL Parse Tree</option>
                                <option value="vdbe">VDBE Execution</option>
                            </select>
                        </label>
                        <label>
                            <input type="checkbox" id="show-transitions" checked>
                            Show Transitions
                        </label>
                        <label>
                            Speed:
                            <input type="range" id="animation-speed" min="0.1" max="2" step="0.1" value="1">
                            <span id="speed-value">1.0x</span>
                        </label>
                    </div>
                    <canvas id="visualization-canvas"></canvas>
                    <div id="node-info" class="node-info hidden">
                        <h3>Node Information</h3>
                        <div id="node-details"></div>
                    </div>
                </section>
            </div>
        </div>

        <footer>
            <div class="stats">
                <span>Status: <span id="db-status">Initializing...</span></span>
                <span>|</span>
                <span>Events: <span id="event-count">0</span></span>
                <span>|</span>
                <span>Pages: <span id="page-count">0</span></span>
            </div>
        </footer>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Loading SQLite WebAssembly module...</p>
    </div>

    <!-- Scripts -->
    <script src="build/sqlite3.js"></script>
    <script src="src/web/js/events.js"></script>
    <script src="src/web/js/visualizer.js"></script>
    <script src="src/web/js/main.js"></script>
</body>
</html>
